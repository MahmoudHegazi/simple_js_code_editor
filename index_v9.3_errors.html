<!DOCTYPE html>
<html>
<head>
<style>
html, body{
  height: 100%;
  width: 100%;
  display: flex;
}
.code-editor {
  display: block;
  border: 2px solid gray;
  background: rgb(40, 44, 52);
  height: 100%;
  width: 70%;
  /* 1time */
  white-space: initial;
  color: #e45771a1;
}

.result {
  display: block;
  border: 2px solid gray;
  background: rgb(250, 250, 250);
  height: 100%;
  width: 29%;
  /* happend with js easy */
  word-wrap: break-word
}
</style>
<title>Page Title</title>
</head>
<body>

<div style="" class="code-editor" id="code_editor" contenteditable="true">

</div>
<div id="result_cont" class="result"></div>
<script>
const delete_backward = "deleteContentBackward";
const delete_forward = "deleteContentForward";
const codeEditor = document.querySelector("#code_editor");
const resultContainer = document.querySelector("#result_cont");

let userwriting = "";
let purewriting = "";
let backwordwriting = "";
let currentpos = 0;
let shiftEnable = false;
// 37 l, 39 r, t 38, b 40
function deleteBackward(auserwriting){
  return auserwriting.substring(0, auserwriting.length-2);
}

function deleteForward(){
}

// when he click key no mater updown click a click
codeEditor.addEventListener("keydown", function(event) {
    if (event.keyCode == 8) {
       //console.log(userwriting.substring(0, userwriting.length-1));
       console.log("external plugin", userwriting);
       userwriting = userwriting.substring(0, userwriting.length-1);
       resultContainer.innerText = userwriting
       if (currentpos != 0){
         currentpos -= 1;
       }
       console.log(currentpos);
       return true;
    }
    
}, false);


codeEditor.addEventListener("keydown", function(event) {
     if (event.key == "Control"){
       return false;
     }
     
     if (event.key == "Backspace"){
       return false;
     }
     if (event.key == "Shift"){
       return false;
     }
     
     if (event.key == "Shift"){
       return false;
     }
     
     if (event.key == "<" || event.key == ">" || event.key == "/" || event.key == '"' || event.key == "'" || event.key == "="){
       return false;
     }
     userwriting += event.key;
     if (event.key.length == 1){
       purewriting += event.key;
     }
     backwordwriting += event.key;
     codeEditor.innerHTML =userwriting;
     



}, false);
codeEditor.addEventListener("keyup", function(event) {

if (event.key == 'Backspace'){
  if (codeEditor.innerHTML[codeEditor.innerHTML.length-1] == ">"){
  
  let removelastnoobspan = codeEditor.innerHTML.split("<");
alert(codeEditor.innerHTML.slice(0, codeEditor.innerHTML.lastIndexOf("<")));
  let x = codeEditor.innerHTML.slice(0, codeEditor.innerHTML.lastIndexOf("<"));
  codeEditor.innerHTML = x.slice(0, x.lastIndexOf("<"));
  
return false;
  }



  return false;
}



if (event.key == "<"){
  userwriting += "<span style='color:lightgreen;'>&lt;</span>";
  purewriting += "<";
  backwordwriting += event.key;
  codeEditor.innerHTML =`${userwriting}`;
  resultContainer.innerHTML = purewriting;
  return false;
}

if (event.key == ">"){
  userwriting += "<span style='color:lightgreen;'>&gt;</span>";
  purewriting += ">";
  backwordwriting += event.key;
  codeEditor.innerHTML =`${userwriting}`;
  resultContainer.innerHTML = purewriting;

  return false;
}


if (event.key == "/"){
  userwriting += "<span style='color:lightgreen;'>&#47;</span>";
  purewriting += "/";
  backwordwriting += event.key;
  codeEditor.innerHTML =`${userwriting}`;
  resultContainer.innerHTML = purewriting;

  return false;
}

if (event.key == '"'){
  userwriting += `<span style='color:lightgreen;'>"</span>`;
  purewriting += '"';
  backwordwriting += event.key;
  codeEditor.innerHTML =`${userwriting}`;
  resultContainer.innerHTML = purewriting;

  return false;
}

if (event.key == '='){
  userwriting += `<span style='color:lightgray;'>=</span>`;
  purewriting += '=';
  backwordwriting += event.key;
  codeEditor.innerHTML =`${userwriting}`;  
  resultContainer.innerHTML = purewriting;

  return false;
}





if (event.key == "'"){
  userwriting += `<span style='color:lightgreen;'>'</span>`;
  purewriting += "'";
  backwordwriting += event.key;
  codeEditor.innerHTML =`${userwriting}`;
  resultContainer.innerHTML = purewriting;

  return false;
}



     codeEditor.innerHTML =`${userwriting}`;
     resultContainer.innerHTML = purewriting;

     //codeEditor.innerHTML =`<h1>${userwriting}</h1>`;
     
}, false);



codeEditor.addEventListener("keypress", function(event) {
    // delete letter Backward
    //console.log(event.keyCode);
    return false;
     if (event.key == "Shift"){
     alert("handled");
       return false;
     }
    event.target.innerHTML =
    substring(0, event.target.innerText[event.target.innerText.length-1]);
    
    //event.target.innerText += event.key;
    return false;
    
    if (event.keyCode == 37) {
      if (currentpos != 0) {
       currentpos -= 1;
      }
      console.log(currentpos);
      return true;
    }
    
    if (event.keyCode == 39) {
      if (currentpos < event.target.innerText.length-1) {
       currentpos += 1;
      }
      console.log(currentpos);
      return true;
    }
    
    if (event.keyCode == 8) {
       //console.log(userwriting.substring(0, userwriting.length-1));

       userwriting = userwriting.substring(0, userwriting.length-1);
       resultContainer.innerText = userwriting
       if (currentpos != 0){
         currentpos -= 1;
       }
       console.log(currentpos);
       return true;
    }
    console.log(currentpos);
    
    if (event.inputType == delete_forward) {
       //console.log("yes");
       return true;
    }
    if (event.keyCode == 8){
    }
    
    
    //45 8
   // console.log(1);
   if (event.key == "Shift"){
     return false;
     
   }
   console.log(event);
    userwriting += event.key;
    
resultContainer.innerHTML = userwriting;
currentpos += 1;
    
}, false);

</script>

</body>
</html>
